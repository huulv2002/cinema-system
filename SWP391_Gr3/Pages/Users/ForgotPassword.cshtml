@page
@model SWP391_Gr3.Pages.Users.ForgotPasswordModel
@{
    ViewData["Title"] = "Quên mật khẩu";
}

<div class="container mt-5" style="max-width: 500px;">
    <h2 class="text-center text-danger">🔑 Quên mật khẩu</h2>

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger">@Model.ErrorMessage</div>
    }
    else if (!string.IsNullOrEmpty(Model.SuccessMessage))
    {
        <div class="alert alert-success">@Model.SuccessMessage</div>
    }

    <form method="post" asp-page-handler="SendOtp">
        <div class="form-group">
            <label>Email</label>
            <input asp-for="Email" class="form-control" />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>
        @if (!Model.ShowResetForm)
        {
            <button type="submit" class="btn btn-danger w-100 mt-3">📨 Gửi mã OTP</button>
        }
    </form>

    @if (Model.ShowResetForm)
    {
        <hr />
        <form method="post" asp-page-handler="ResetPassword">
            <input type="hidden" asp-for="Email" />
            <div class="form-group">
                <label>Mã OTP</label>
                <input asp-for="Otp" class="form-control" />
                <span asp-validation-for="Otp" class="text-danger"></span>
            </div>
            <div class="form-group mt-2">
                <label>Mật khẩu mới</label>
                <input asp-for="NewPassword" class="form-control" type="password" />
                <span asp-validation-for="NewPassword" class="text-danger"></span>
            </div>
            <div class="form-group mt-2">
                <label>Nhập lại mật khẩu</label>
                <input asp-for="ConfirmPassword" class="form-control" type="password" />
                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
            </div>
            <button type="submit" class="btn btn-success mt-3 w-100">🔒 Đặt lại mật khẩu</button>
        </form>
    }
</div>
